<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Duplicate Analysis Report</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        .header {
            background: white; border-radius: 16px; padding: 30px;
            margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .header h1 { font-size: 2.5rem; color: #2d3748; margin-bottom: 10px; }
        .header p { color: #718096; font-size: 1.1rem; }
        
        .summary-cards {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        
        .summary-card {
            background: white; border-radius: 12px; padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center;
            transition: transform 0.2s;
        }
        
        .summary-card:hover { transform: translateY(-2px); }
        .summary-card h3 { font-size: 2.5rem; margin-bottom: 5px; font-weight: bold; }
        .summary-card.primary h3 { color: #667eea; }
        .summary-card.warning h3 { color: #f6ad55; }
        .summary-card.success h3 { color: #48bb78; }
        .summary-card.info h3 { color: #4299e1; }
        .summary-card p { color: #718096; font-size: 0.95rem; }
        
        .transcript-section {
            background: white; border-radius: 16px; padding: 30px;
            margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .transcript-section h2 {
            color: #2d3748; margin-bottom: 20px; font-size: 1.8rem;
            border-bottom: 2px solid #e2e8f0; padding-bottom: 10px;
        }
        
        .transcript-controls {
            margin-bottom: 15px; padding: 10px; background: #f7fafc;
            border-radius: 8px; display: flex; gap: 10px; flex-wrap: wrap;
        }
        
        .create-group-button, .toggle-edit-mode {
            background: #4299e1; color: white; border: none; padding: 8px 16px;
            border-radius: 6px; cursor: pointer; font-size: 0.9rem;
            transition: background 0.2s;
        }
        
        .create-group-button:hover, .toggle-edit-mode:hover {
            background: #3182ce;
        }
        
        .transcript-paragraph {
            font-size: 1.2rem; line-height: 1.8; color: #2d3748;
            padding: 25px; background: #f8f9fa; border-radius: 12px;
            text-align: justify; position: relative; min-height: 200px;
        }
        
        .transcript-segment {
            cursor: pointer; padding: 2px 4px; border-radius: 3px;
            transition: all 0.2s ease; display: inline; position: relative;
            border-bottom: 1px solid transparent;
        }
        
        .transcript-segment:hover {
            background: rgba(66, 153, 225, 0.1); border-bottom-color: #4299e1;
        }
        
        .transcript-segment[contenteditable="true"] {
            background: white; border: 1px solid #4299e1;
            padding: 2px 6px; border-radius: 4px; outline: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .segment-timestamp-overlay {
            position: absolute; top: -20px; left: 0; font-size: 0.7rem;
            color: #718096; background: white; padding: 2px 6px;
            border-radius: 3px; opacity: 0; transition: opacity 0.2s;
            pointer-events: none; z-index: 10;
        }
        
        .transcript-segment:hover .segment-timestamp-overlay {
            opacity: 1;
        }
        
        .duplicate-highlight {
            font-weight: 600; border-radius: 4px; padding: 3px 8px;
            position: relative; border-bottom: 2px solid;
        }
        
        .duplicate-highlight:hover {
            transform: translateY(-2px); box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        .duplicate-highlight.duplicate-group-1 {
            background: #fed7d7; color: #c53030; border-bottom-color: #f56565;
        }
        .duplicate-highlight.duplicate-group-1:hover { background: #fc8181; color: white; }
        
        .duplicate-highlight.duplicate-group-2 {
            background: #feebc8; color: #c05621; border-bottom-color: #ed8936;
        }
        .duplicate-highlight.duplicate-group-2:hover { background: #f6ad55; color: white; }
        
        .duplicate-highlight.duplicate-group-3 {
            background: #b2f5ea; color: #2c7a7b; border-bottom-color: #38b2ac;
        }
        .duplicate-highlight.duplicate-group-3:hover { background: #4fd1c5; color: white; }
        
        .video-section {
            background: white; border-radius: 16px; padding: 30px;
            margin-bottom: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .video-section h2 { color: #2d3748; margin-bottom: 20px; font-size: 1.5rem; }
        
        #videoPlayer {
            width: 100%; max-width: 800px; height: auto;
            aspect-ratio: 16/9; border-radius: 8px; background: #000;
            margin: 0 auto; display: block;
        }
        
        .duplicates-section {
            background: white; border-radius: 16px; padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .duplicates-section h2 { color: #2d3748; margin-bottom: 25px; font-size: 1.5rem; }
        
        .duplicate-group {
            background: #f7fafc; border-radius: 12px; padding: 25px;
            margin-bottom: 25px; border-left: 5px solid #667eea;
        }
        
        .group-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; flex-wrap: wrap; gap: 15px;
        }
        
        .group-title { font-size: 1.3rem; color: #2d3748; font-weight: 600; }
        
        .similarity-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white; padding: 8px 16px; border-radius: 20px;
            font-weight: bold; font-size: 0.9rem;
        }
        
        .edit-group-button, .add-segment-button, .remove-group-button {
            background: #4299e1; color: white; border: none; padding: 6px 12px;
            border-radius: 6px; cursor: pointer; font-size: 0.8rem; margin-left: 8px;
        }
        
        .remove-group-button { background: #e53e3e; }
        
        .segments-grid { display: grid; gap: 15px; }
        
        .segment-card {
            background: white; border-radius: 8px; padding: 20px;
            border: 2px solid #e2e8f0; transition: all 0.2s; cursor: pointer;
        }
        
        .segment-card:hover { border-color: #667eea; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1); }
        
        .segment-card.recommended { border-color: #48bb78; background: linear-gradient(135deg, #f0fff4, #ffffff); }
        
        .segment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        
        .segment-time {
            background: #edf2f7; color: #4a5568; padding: 4px 10px;
            border-radius: 6px; font-size: 0.85rem; font-weight: 600;
        }
        
        .segment-text { color: #2d3748; line-height: 1.6; font-size: 1rem; }
        
        .segment-edit-input {
            width: 100%; padding: 8px; border: 1px solid #cbd5e0;
            border-radius: 4px; font-size: 1rem; margin-top: 8px;
        }
        
        .play-button, .edit-button {
            background: #667eea; color: white; border: none; padding: 8px 16px;
            border-radius: 6px; cursor: pointer; font-size: 0.85rem; margin-left: 8px;
        }
        
        .edit-button { background: #ed8936; }
        
        .group-edit-controls {
            margin-top: 15px; padding-top: 15px; border-top: 1px solid #e2e8f0;
        }
        
        .no-duplicates {
            text-align: center; padding: 60px 20px; color: #718096;
        }
        
        .footer { text-align: center; margin-top: 40px; padding: 20px; color: white; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ Interactive Duplicate Analysis</h1>
            <p>Edit and manage duplicate groups with real-time updates</p>
        </div>

        <div class="summary-cards">
            <div class="summary-card primary">
                <h3>32</h3>
                <p>Total Segments</p>
            </div>
            <div class="summary-card warning">
                <h3>3</h3>
                <p>Duplicate Groups</p>
            </div>
            <div class="summary-card success">
                <h3>0.0s</h3>
                <p>Processing Time</p>
            </div>
            <div class="summary-card info">
                <h3>simple_text_similarity</h3>
                <p>AI Model</p>
            </div>
        </div>

        <div class="transcript-section"><h2>üìù Interactive Transcript</h2><p>Click any highlighted segment to play or edit. Duplicate segments are color-coded and can be grouped/ungrouped.</p><div class="transcript-controls"><button class="create-group-button" onclick="createNewGroup()">‚ûï Create New Group</button><button class="toggle-edit-mode" onclick="toggleEditMode()">‚úèÔ∏è Toggle Edit Mode</button></div><div class="transcript-paragraph">
                <span class="transcript-segment " 
                      
                      data-start="1.68" 
                      data-end="6.7"
                      title="00:01 - 00:06"
                      onclick="handleSegmentClick(this, 1.68, 6.7, 'seg_0')"
                      contenteditable="false">Where there was not God's book and then there was.</span> 
                <span class="transcript-segment " 
                      
                      data-start="7.68" 
                      data-end="10.7"
                      title="00:07 - 00:10"
                      onclick="handleSegmentClick(this, 7.68, 10.7, 'seg_1')"
                      contenteditable="false">Welcome to Life is Your Word episode 3.</span> 
                <span class="transcript-segment " 
                      
                      data-start="11.68" 
                      data-end="17.7"
                      title="00:11 - 00:17"
                      onclick="handleSegmentClick(this, 11.68, 17.7, 'seg_2')"
                      contenteditable="false">In this show, we build up our understanding of reality by seeking God's face.</span> 
                <span class="transcript-segment " 
                      
                      data-start="20.44" 
                      data-end="22.46"
                      title="00:20 - 00:22"
                      onclick="handleSegmentClick(this, 20.44, 22.46, 'seg_3')"
                      contenteditable="false">Today's reading is from Genesis chapter 1.</span> 
                <span class="transcript-segment " 
                      
                      data-start="27.200000000000003" 
                      data-end="34.11"
                      title="00:27 - 00:34"
                      onclick="handleSegmentClick(this, 27.200000000000003, 34.11, 'seg_4')"
                      contenteditable="false">When God began to create the heavens and the earth, the earth was in complete chaos and</span> 
                <span class="transcript-segment " 
                      
                      data-start="35.010000000000005" 
                      data-end="42.42"
                      title="00:35 - 00:42"
                      onclick="handleSegmentClick(this, 35.010000000000005, 42.42, 'seg_5')"
                      contenteditable="false">darkness covered the face of the deep while a wind of God, while a wind from God</span> 
                <span class="transcript-segment " 
                      
                      data-start="43.760000000000005" 
                      data-end="45.349000000000004"
                      title="00:43 - 00:45"
                      onclick="handleSegmentClick(this, 43.760000000000005, 45.349000000000004, 'seg_6')"
                      contenteditable="false">swept over the face of the waters.</span> 
                <span class="transcript-segment " 
                      
                      data-start="47.803" 
                      data-end="50.74"
                      title="00:47 - 00:50"
                      onclick="handleSegmentClick(this, 47.803, 50.74, 'seg_7')"
                      contenteditable="false">Then God said, let there be light and there was light.</span> 
                <span class="transcript-segment " 
                      
                      data-start="52.28" 
                      data-end="58.11"
                      title="00:52 - 00:58"
                      onclick="handleSegmentClick(this, 52.28, 58.11, 'seg_8')"
                      contenteditable="false">And God saw, and God saw that the light was good and</span> 
                <span class="transcript-segment " 
                      
                      data-start="59.53" 
                      data-end="61.95"
                      title="00:59 - 01:01"
                      onclick="handleSegmentClick(this, 59.53, 61.95, 'seg_9')"
                      contenteditable="false">God separated the light from the darkness.</span> 
                <span class="transcript-segment " 
                      
                      data-start="62.49" 
                      data-end="65.87"
                      title="01:02 - 01:05"
                      onclick="handleSegmentClick(this, 62.49, 65.87, 'seg_10')"
                      contenteditable="false">God created humans in the image of God.</span> 
                <span class="transcript-segment " 
                      
                      data-start="67.00999999999999" 
                      data-end="72.456"
                      title="01:07 - 01:12"
                      onclick="handleSegmentClick(this, 67.00999999999999, 72.456, 'seg_11')"
                      contenteditable="false">God blessed them, saying be fruitful and fill the earth.</span> 
                <span class="transcript-segment " 
                      
                      data-start="74.104" 
                      data-end="75.43"
                      title="01:14 - 01:15"
                      onclick="handleSegmentClick(this, 74.104, 75.43, 'seg_12')"
                      contenteditable="false">I have given you everything.</span> 
                <span class="transcript-segment " 
                      
                      data-start="79.62" 
                      data-end="90.64000000000001"
                      title="01:19 - 01:30"
                      onclick="handleSegmentClick(this, 79.62, 90.64000000000001, 'seg_13')"
                      contenteditable="false">In my past death, I lived in complete chaos and the great darkness of depression covered my face.</span> 
                <span class="transcript-segment " 
                      
                      data-start="90.62" 
                      data-end="104.64000000000001"
                      title="01:30 - 01:44"
                      onclick="handleSegmentClick(this, 90.62, 104.64000000000001, 'seg_14')"
                      contenteditable="false">I stopped listening to God's voice and I tried to run my race in my strength, in my strength, and I tried to run my race in my strength, rather than by Christ living in me.</span> 
                <span class="transcript-segment " 
                      
                      data-start="104.62" 
                      data-end="110.64000000000001"
                      title="01:44 - 01:50"
                      onclick="handleSegmentClick(this, 104.62, 110.64000000000001, 'seg_15')"
                      contenteditable="false">But God's, but then God spoke and I became.</span> 
                <span class="transcript-segment " 
                      
                      data-start="110.62" 
                      data-end="119.64000000000001"
                      title="01:50 - 01:59"
                      onclick="handleSegmentClick(this, 110.62, 119.64000000000001, 'seg_16')"
                      contenteditable="false">Life filled me, peace beyond human understanding, joy that defied worldly authorities,</span> 
                <span class="transcript-segment " 
                      
                      data-start="119.62" 
                      data-end="128.64000000000001"
                      title="01:59 - 02:08"
                      onclick="handleSegmentClick(this, 119.62, 128.64000000000001, 'seg_17')"
                      contenteditable="false">and I became compelled to shout God's praise from every mountaintop and share God's great works with everyone.</span> 
                <span class="transcript-segment " 
                      
                      data-start="131.42000000000002" 
                      data-end="136.44000000000003"
                      title="02:11 - 02:16"
                      onclick="handleSegmentClick(this, 131.42000000000002, 136.44000000000003, 'seg_18')"
                      contenteditable="false">So I thank God regularly for my role in partaking in creation as</span> 
                <span class="transcript-segment " 
                      
                      data-start="137.10000000000002" 
                      data-end="142.76000000000002"
                      title="02:17 - 02:22"
                      onclick="handleSegmentClick(this, 137.10000000000002, 142.76000000000002, 'seg_19')"
                      contenteditable="false">I create these things for your benefit just as God created all things for our benefit.</span> 
                <span class="transcript-segment duplicate-highlight duplicate-group-1" 
                      data-group="1" data-segment-id="seg_20"
                      data-start="143.26000000000002" 
                      data-end="148.44000000000003"
                      title="02:23 - 02:28"
                      onclick="handleSegmentClick(this, 143.26000000000002, 148.44000000000003, 'seg_20')"
                      contenteditable="false">This reminds me, this reminds me that nothing is impossible</span> 
                <span class="transcript-segment " 
                      
                      data-start="149.46" 
                      data-end="151.48000000000002"
                      title="02:29 - 02:31"
                      onclick="handleSegmentClick(this, 149.46, 151.48000000000002, 'seg_21')"
                      contenteditable="false">through Christ who gives me strength.</span> 
                <span class="transcript-segment duplicate-highlight duplicate-group-1" 
                      data-group="1" data-segment-id="seg_22"
                      data-start="153.51000000000002" 
                      data-end="158.21"
                      title="02:33 - 02:38"
                      onclick="handleSegmentClick(this, 153.51000000000002, 158.21, 'seg_22')"
                      contenteditable="false">This reminds me that nothing is impossible through Christ who gives me strength.</span> 
                <span class="transcript-segment " 
                      
                      data-start="159.19000000000003" 
                      data-end="167.33"
                      title="02:39 - 02:47"
                      onclick="handleSegmentClick(this, 159.19000000000003, 167.33, 'seg_23')"
                      contenteditable="false">The one who speaks all things into being can transform your life too.</span> 
                <span class="transcript-segment duplicate-highlight duplicate-group-2" 
                      data-group="2" data-segment-id="seg_24"
                      data-start="172.11" 
                      data-end="175.45000000000002"
                      title="02:52 - 02:55"
                      onclick="handleSegmentClick(this, 172.11, 175.45000000000002, 'seg_24')"
                      contenteditable="false">What death have you lived?</span> 
                <span class="transcript-segment " 
                      
                      data-start="177.11" 
                      data-end="179.21"
                      title="02:57 - 02:59"
                      onclick="handleSegmentClick(this, 177.11, 179.21, 'seg_25')"
                      contenteditable="false">They...</span> 
                <span class="transcript-segment duplicate-highlight duplicate-group-2" 
                      data-group="2" data-segment-id="seg_26"
                      data-start="179.19" 
                      data-end="182.13000000000002"
                      title="02:59 - 03:02"
                      onclick="handleSegmentClick(this, 179.19, 182.13000000000002, 'seg_26')"
                      contenteditable="false">What death have you experienced that he needs?</span> 
                <span class="transcript-segment " 
                      
                      data-start="185.36" 
                      data-end="190.12000000000003"
                      title="03:05 - 03:10"
                      onclick="handleSegmentClick(this, 185.36, 190.12000000000003, 'seg_27')"
                      contenteditable="false">What death have you experienced and how has he breathed life into your death and</span> 
                <span class="transcript-segment duplicate-highlight duplicate-group-3" 
                      data-group="3" data-segment-id="seg_28"
                      data-start="190.72000000000003" 
                      data-end="201.33"
                      title="03:10 - 03:21"
                      onclick="handleSegmentClick(this, 190.72000000000003, 201.33, 'seg_28')"
                      contenteditable="false">How has he breathed life in and how has he breathed life into you and how did he speak you into being and</span> 
                <span class="transcript-segment duplicate-highlight duplicate-group-3" 
                      data-group="3" data-segment-id="seg_29"
                      data-start="202.95000000000002" 
                      data-end="210.81000000000003"
                      title="03:22 - 03:30"
                      onclick="handleSegmentClick(this, 202.95000000000002, 210.81000000000003, 'seg_29')"
                      contenteditable="false">How did he speak you into being and how did he speak you into being and life?</span> 
                <span class="transcript-segment " 
                      
                      data-start="213.43000000000004" 
                      data-end="216.45000000000002"
                      title="03:33 - 03:36"
                      onclick="handleSegmentClick(this, 213.43000000000004, 216.45000000000002, 'seg_30')"
                      contenteditable="false">Share your revelations in the comments.</span> 
                <span class="transcript-segment " 
                      
                      data-start="216.43000000000004" 
                      data-end="218.45000000000002"
                      title="03:36 - 03:38"
                      onclick="handleSegmentClick(this, 216.43000000000004, 218.45000000000002, 'seg_31')"
                      contenteditable="false">In love and unity, Aceh Vail.</span>.</div></div>

        <div class="video-section">
            <h2>üìπ Video Player</h2>
            <video id="videoPlayer" controls>
                <source src="/home/asabaal/episode3_combined/combined_video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div class="duplicates-section">
            <h2>üîç Editable Duplicate Groups</h2>
            
                <div class="duplicate-group" data-group-id="group_1">
                    <div class="group-header">
                        <div>
                            <div class="group-title">üîÑ Duplicate Group 1</div>
                            <p style="color: #718096; margin-top: 5px;">Text similarity: 60.4%</p>
                        </div>
                        <div>
                            <div class="similarity-badge">60.4% Similar</div>
                            <button class="edit-group-button" onclick="toggleGroupEdit('group_1')">üìù Edit Group</button>
                        </div>
                    </div>
                    <div class="segments-grid">
                        
                    <div class="segment-card recommended" 
                         data-segment-id="seg_20"
                         onclick="playSegment(143.26000000000002, 148.44000000000003)">
                        <div class="segment-header">
                            <span class="segment-time">‚è∞ 02:23 - 02:28</span>
                            <div>
                                <span class="recommended-badge">‚≠ê RECOMMENDED</span>
                                <button class="play-button" onclick="event.stopPropagation(); playSegment(143.26000000000002, 148.44000000000003)">‚ñ∂ Play</button>
                                <button class="edit-button" onclick="event.stopPropagation(); toggleSegmentEdit('seg_20')">‚úèÔ∏è Edit</button>
                            </div>
                        </div>
                        <div class="segment-text" id="text-seg_20">This reminds me, this reminds me that nothing is impossible</div>
                        <input type="text" class="segment-edit-input" id="edit-seg_20" 
                               value="This reminds me, this reminds me that nothing is impossible" style="display:none;" 
                               onblur="saveSegmentEdit('seg_20')">
                    </div>
                    <div class="segment-card " 
                         data-segment-id="seg_22"
                         onclick="playSegment(153.51000000000002, 158.21)">
                        <div class="segment-header">
                            <span class="segment-time">‚è∞ 02:33 - 02:38</span>
                            <div>
                                
                                <button class="play-button" onclick="event.stopPropagation(); playSegment(153.51000000000002, 158.21)">‚ñ∂ Play</button>
                                <button class="edit-button" onclick="event.stopPropagation(); toggleSegmentEdit('seg_22')">‚úèÔ∏è Edit</button>
                            </div>
                        </div>
                        <div class="segment-text" id="text-seg_22">This reminds me that nothing is impossible through Christ who gives me strength.</div>
                        <input type="text" class="segment-edit-input" id="edit-seg_22" 
                               value="This reminds me that nothing is impossible through Christ who gives me strength." style="display:none;" 
                               onblur="saveSegmentEdit('seg_22')">
                    </div>
                    </div>
                    <div class="group-edit-controls" id="group-edit-group_1" style="display:none;">
                        <button class="add-segment-button" onclick="showAddSegmentDialog('group_1')">‚ûï Add Segment</button>
                        <button class="remove-group-button" onclick="removeGroup('group_1')">üóëÔ∏è Remove Group</button>
                    </div>
                </div>
                <div class="duplicate-group" data-group-id="group_2">
                    <div class="group-header">
                        <div>
                            <div class="group-title">üîÑ Duplicate Group 2</div>
                            <p style="color: #718096; margin-top: 5px;">Text similarity: 66.7%</p>
                        </div>
                        <div>
                            <div class="similarity-badge">66.7% Similar</div>
                            <button class="edit-group-button" onclick="toggleGroupEdit('group_2')">üìù Edit Group</button>
                        </div>
                    </div>
                    <div class="segments-grid">
                        
                    <div class="segment-card recommended" 
                         data-segment-id="seg_24"
                         onclick="playSegment(172.11, 175.45000000000002)">
                        <div class="segment-header">
                            <span class="segment-time">‚è∞ 02:52 - 02:55</span>
                            <div>
                                <span class="recommended-badge">‚≠ê RECOMMENDED</span>
                                <button class="play-button" onclick="event.stopPropagation(); playSegment(172.11, 175.45000000000002)">‚ñ∂ Play</button>
                                <button class="edit-button" onclick="event.stopPropagation(); toggleSegmentEdit('seg_24')">‚úèÔ∏è Edit</button>
                            </div>
                        </div>
                        <div class="segment-text" id="text-seg_24">What death have you lived?</div>
                        <input type="text" class="segment-edit-input" id="edit-seg_24" 
                               value="What death have you lived?" style="display:none;" 
                               onblur="saveSegmentEdit('seg_24')">
                    </div>
                    <div class="segment-card " 
                         data-segment-id="seg_26"
                         onclick="playSegment(179.19, 182.13000000000002)">
                        <div class="segment-header">
                            <span class="segment-time">‚è∞ 02:59 - 03:02</span>
                            <div>
                                
                                <button class="play-button" onclick="event.stopPropagation(); playSegment(179.19, 182.13000000000002)">‚ñ∂ Play</button>
                                <button class="edit-button" onclick="event.stopPropagation(); toggleSegmentEdit('seg_26')">‚úèÔ∏è Edit</button>
                            </div>
                        </div>
                        <div class="segment-text" id="text-seg_26">What death have you experienced that he needs?</div>
                        <input type="text" class="segment-edit-input" id="edit-seg_26" 
                               value="What death have you experienced that he needs?" style="display:none;" 
                               onblur="saveSegmentEdit('seg_26')">
                    </div>
                    </div>
                    <div class="group-edit-controls" id="group-edit-group_2" style="display:none;">
                        <button class="add-segment-button" onclick="showAddSegmentDialog('group_2')">‚ûï Add Segment</button>
                        <button class="remove-group-button" onclick="removeGroup('group_2')">üóëÔ∏è Remove Group</button>
                    </div>
                </div>
                <div class="duplicate-group" data-group-id="group_3">
                    <div class="group-header">
                        <div>
                            <div class="group-title">üîÑ Duplicate Group 3</div>
                            <p style="color: #718096; margin-top: 5px;">Text similarity: 63.7%</p>
                        </div>
                        <div>
                            <div class="similarity-badge">63.7% Similar</div>
                            <button class="edit-group-button" onclick="toggleGroupEdit('group_3')">üìù Edit Group</button>
                        </div>
                    </div>
                    <div class="segments-grid">
                        
                    <div class="segment-card recommended" 
                         data-segment-id="seg_28"
                         onclick="playSegment(190.72000000000003, 201.33)">
                        <div class="segment-header">
                            <span class="segment-time">‚è∞ 03:10 - 03:21</span>
                            <div>
                                <span class="recommended-badge">‚≠ê RECOMMENDED</span>
                                <button class="play-button" onclick="event.stopPropagation(); playSegment(190.72000000000003, 201.33)">‚ñ∂ Play</button>
                                <button class="edit-button" onclick="event.stopPropagation(); toggleSegmentEdit('seg_28')">‚úèÔ∏è Edit</button>
                            </div>
                        </div>
                        <div class="segment-text" id="text-seg_28">How has he breathed life in and how has he breathed life into you and how did he speak you into being and</div>
                        <input type="text" class="segment-edit-input" id="edit-seg_28" 
                               value="How has he breathed life in and how has he breathed life into you and how did he speak you into being and" style="display:none;" 
                               onblur="saveSegmentEdit('seg_28')">
                    </div>
                    <div class="segment-card " 
                         data-segment-id="seg_29"
                         onclick="playSegment(202.95000000000002, 210.81000000000003)">
                        <div class="segment-header">
                            <span class="segment-time">‚è∞ 03:22 - 03:30</span>
                            <div>
                                
                                <button class="play-button" onclick="event.stopPropagation(); playSegment(202.95000000000002, 210.81000000000003)">‚ñ∂ Play</button>
                                <button class="edit-button" onclick="event.stopPropagation(); toggleSegmentEdit('seg_29')">‚úèÔ∏è Edit</button>
                            </div>
                        </div>
                        <div class="segment-text" id="text-seg_29">How did he speak you into being and how did he speak you into being and life?</div>
                        <input type="text" class="segment-edit-input" id="edit-seg_29" 
                               value="How did he speak you into being and how did he speak you into being and life?" style="display:none;" 
                               onblur="saveSegmentEdit('seg_29')">
                    </div>
                    </div>
                    <div class="group-edit-controls" id="group-edit-group_3" style="display:none;">
                        <button class="add-segment-button" onclick="showAddSegmentDialog('group_3')">‚ûï Add Segment</button>
                        <button class="remove-group-button" onclick="removeGroup('group_3')">üóëÔ∏è Remove Group</button>
                    </div>
                </div>
        </div>

        <div class="footer">
            <p>Interactive duplicate detection with editing capabilities ‚Ä¢ Processing time: 0.0 seconds</p>
        </div>
    </div>

    <script>
        let editMode = false;
        let selectedSegments = [];
        let groupCounter = 4;
        
        function playSegment(startTime, endTime) {
            const video = document.getElementById('videoPlayer');
            video.currentTime = startTime;
            video.play();
            
            setTimeout(() => {
                if (video.currentTime >= endTime - 0.5) {
                    video.pause();
                }
            }, (endTime - startTime) * 1000);
        }
        
        function handleSegmentClick(element, startTime, endTime, segmentId) {
            if (editMode) {
                toggleSegmentEdit(element);
            } else {
                if (event.shiftKey && selectedSegments.length > 0) {
                    // Shift+click for multi-selection
                    selectSegment(element, segmentId);
                } else if (event.ctrlKey || event.metaKey) {
                    // Ctrl/Cmd+click for toggle selection
                    toggleSegmentSelection(element, segmentId);
                } else {
                    // Normal click - play video
                    playSegment(startTime, endTime);
                }
            }
        }
        
        function toggleEditMode() {
            editMode = !editMode;
            const button = document.querySelector('.toggle-edit-mode');
            button.textContent = editMode ? 'üîí Lock Editing' : '‚úèÔ∏è Toggle Edit Mode';
            
            // Make all segments editable/non-editable
            document.querySelectorAll('.transcript-segment').forEach(segment => {
                segment.contentEditable = editMode;
                if (editMode) {
                    segment.style.backgroundColor = 'rgba(66, 153, 225, 0.05)';
                } else {
                    segment.style.backgroundColor = '';
                }
            });
        }
        
        function toggleSegmentEdit(element) {
            if (element.contentEditable === 'true') {
                element.contentEditable = 'false';
                element.style.backgroundColor = '';
                // Save changes here if needed
                console.log('Saved:', element.textContent);
            } else {
                element.contentEditable = 'true';
                element.style.backgroundColor = 'white';
                element.focus();
                
                // Select all text
                const range = document.createRange();
                range.selectNodeContents(element);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }
        
        function selectSegment(element, segmentId) {
            if (!selectedSegments.find(s => s.id === segmentId)) {
                selectedSegments.push({element, id: segmentId});
                element.style.outline = '2px solid #4299e1';
                element.style.outlineOffset = '2px';
            }
        }
        
        function toggleSegmentSelection(element, segmentId) {
            const index = selectedSegments.findIndex(s => s.id === segmentId);
            if (index > -1) {
                selectedSegments.splice(index, 1);
                element.style.outline = '';
                element.style.outlineOffset = '';
            } else {
                selectSegment(element, segmentId);
            }
        }
        
        function createNewGroup() {
            if (selectedSegments.length < 2) {
                alert('Please select at least 2 segments to create a group. Use Ctrl+click to select multiple segments.');
                return;
            }
            
            const groupNum = groupCounter++;
            const groupColor = getGroupColor(groupNum);
            
            selectedSegments.forEach(({element}) => {
                element.classList.add('duplicate-highlight', `duplicate-group-${groupNum}`);
                element.setAttribute('data-group', groupNum);
                element.style.outline = '';
                element.style.outlineOffset = '';
            });
            
            // Clear selection
            selectedSegments = [];
            
            alert(`Created duplicate group ${groupNum} with ${selectedSegments.length} segments.`);
        }
        
        function getGroupColor(groupNum) {
            const colors = [
                {bg: '#fed7d7', hover: '#fc8181', border: '#f56565'},
                {bg: '#feebc8', hover: '#f6ad55', border: '#ed8936'},
                {bg: '#b2f5ea', hover: '#4fd1c5', border: '#38b2ac'},
                {bg: '#e9d8fd', hover: '#b794f4', border: '#805ad5'},
                {bg: '#faf089', hover: '#f6e05e', border: '#d69e2e'}
            ];
            return colors[(groupNum - 1) % colors.length];
        }
        
        function removeFromGroup(element) {
            const groupNum = element.getAttribute('data-group');
            if (groupNum) {
                element.classList.remove('duplicate-highlight', `duplicate-group-${groupNum}`);
                element.removeAttribute('data-group');
            }
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ' && e.target.tagName !== 'INPUT' && e.target.contentEditable !== 'true') {
                e.preventDefault();
                const video = document.getElementById('videoPlayer');
                if (video.paused) {
                    video.play();
                } else {
                    video.pause();
                }
            }
            
            if (e.key === 'Escape') {
                // Clear selections
                selectedSegments.forEach(({element}) => {
                    element.style.outline = '';
                    element.style.outlineOffset = '';
                });
                selectedSegments = [];
            }
            
            if (e.key === 'Delete' && selectedSegments.length > 0) {
                // Remove selected segments from their groups
                selectedSegments.forEach(({element}) => {
                    removeFromGroup(element);
                });
                selectedSegments = [];
            }
        });
        
        // Add right-click context menu for segments
        document.addEventListener('contextmenu', (e) => {
            if (e.target.classList.contains('transcript-segment')) {
                e.preventDefault();
                // Could add context menu here
                console.log('Right-click on segment:', e.target.textContent);
            }
        });
    </script>
</body>
</html>